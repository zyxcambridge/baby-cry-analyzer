# 婴儿哭声与行为分析器

一个基于Web的婴儿哭声与行为分析工具，通过2分钟的音频记录、实时婴儿哭声和视频分析来判断宝宝哭声和动作行为的原因并提供解决方案。

## 功能特点

- 通过2分钟的音频记录分析婴儿哭声原因
- 实时婴儿哭声分析与展示
- 婴儿视频行为分析（默认调用后置摄像头）
- 综合三种分析结果提供解决方案
- 每分钟自动进行婴儿行为状态分析（无哭声时）

## 技术原理

本系统基于以下多学科分析：

### 1. 声学/信号处理
- 使用梅尔频率倒谱系数（MFCC）分析哭声特征
- 谱图分析技术识别哭声模式
- 基频（F0，250-700 Hz）检测
- 响度和音调分析

### 2. 心理学
- 婴儿行为模式识别
- 情绪状态分析
- 需求表达模式研究

### 3. 婴幼儿护理学
- 不同哭声类型的专业识别
- 护理解决方案推荐
- 成长阶段特征分析

### 4. 人类成长学
- 婴儿发育阶段与哭声关系
- 生理需求表达模式
- 情感发展与哭声联系

### 5. 人体生物构成
- 呼吸系统与哭声产生机制
- 神经系统反应模式
- 生理状态与声音关系

## 文件结构

```
baby_cry_analyzer/
├── index.html          # 主页面
├── css/
│   └── style.css       # 样式文件
├── js/
│   └── main.js         # 主程序逻辑
├── docs/
│   └── architecture.md # 系统架构图
└── models/             # 机器学习模型（待实现）
```

## 使用方法

1. 在支持的浏览器中打开 `index.html`
2. 允许访问麦克风和摄像头权限
3. 选择以下任意一种或多种分析方式：
   - 点击"开始录音"按钮录制2分钟宝宝哭声
   - 点击"开始实时分析"进行实时哭声分析
   - 点击"开启摄像头"进行视频行为分析
4. 系统将自动综合分析结果并提供解决方案

## 核心功能详解

### 1. 2分钟音频记录分析
- 录制完整的2分钟音频片段
- 分析哭声的声学特征（基频、响度、音调等）
- 识别不同类型的哭声（饥饿、困倦、不适、疼痛、尿湿等）
- 提供针对性的解决方案

### 2. 实时婴儿哭声分析
- 实时监听并分析婴儿哭声
- 通过阿里云Qwen-Omni实时模型进行分析
- 实时展示分析结果
- 提供即时反馈和建议

### 3. 婴儿视频行为分析
- 默认调用后置摄像头进行视频录制
- 无哭声时进行婴儿意图识别和行为分析
- 每分钟自动分析一次婴儿行为状态
- 通过弹框提示行为分析结果（5秒后自动消失）

### 4. 综合分析与解决方案
- 综合三种分析结果进行判断
- 提供更加准确和全面的解决方案
- 根据可用数据源动态调整分析方法说明

## 技术实现

### 前端技术
- HTML5 用于页面结构
- CSS3 用于样式设计
- JavaScript (ES6+) 用于交互逻辑
- Web Audio API 用于音频处理
- MediaRecorder API 用于音频录制
- getUserMedia API 用于访问设备媒体

### 音频分析（计划实现）
- MFCC特征提取
- 频谱分析
- 机器学习模型分类

### 云端AI服务
- 阿里云Qwen-Omni实时模型用于实时音频分析
- 阿里云Qwen-VL-Max模型用于视频行为分析
- API密钥：sk-e84b9c85f2db40f7a8c9a0fba43fe3de

## 当前状态

目前版本为演示版本，包含完整的用户界面和基础交互功能。哭声分析部分采用模拟方式，实际部署时需要集成机器学习模型进行准确分析。

## 多学科分析依据

研究表明，婴儿的哭声具有独特的声学特征，可以通过技术手段进行分类：

- **声学特征**：不同需求的哭声在基频、响度和音调上有显著差异
- **心理学基础**：哭声是婴儿表达需求的主要方式，不同需求产生不同模式
- **护理学实践**：专业护理人员可以通过哭声判断婴儿需求，准确率达80%以上
- **技术可行性**：机器学习模型可达到80-90%的分类准确率（EURASIP Journal）

## 系统架构

详细系统架构请参考 [docs/architecture.md](docs/architecture.md) 文件，包含以下三张关键图示：

1. **架构图**：展示主要模块、组件之间的关系和依赖
2. **API调用图**：展示核心API函数之间的调用顺序和依赖路径
3. **数据流向图**：展示数据从输入、处理、存储到输出的流转路径

## 未来发展

1. 集成TensorFlow.js实现浏览器内机器学习推理
2. 添加更多哭声类型识别
3. 增加历史记录和统计功能
4. 提供个性化解决方案推荐
5. 增加多语言支持